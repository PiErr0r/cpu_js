{"version":3,"file":"bundle.js","mappings":";;;;;;;;;;AAAa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,6BAA6B;AACjE;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,eAAe;;;;;;;;;;;ACjDF;AACb;AACA,6CAA6C;AAC7C;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,+BAA+B,mBAAO,CAAC,iCAAU;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,mDAAmD;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,eAAe;;;;;;;;;;;AC/DF;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,gBAAgB,mBAAO,CAAC,mCAAW;AACnC,gBAAgB,mBAAO,CAAC,mCAAW;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,0CAA0C;AAC1C,0CAA0C;AAC1C,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,+CAA+C;AACrF;AACA;AACA,yCAAyC;AACzC,yCAAyC;AACzC,yCAAyC;AACzC,0CAA0C;AAC1C,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC,mCAAmC;AACnC,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,2CAA2C;AACjF;AACA;AACA,kCAAkC;AAClC,kCAAkC;AAClC,kCAAkC;AAClC,mCAAmC;AACnC,mCAAmC;AACnC;AACA,CAAC;AACD,eAAe;;;;;;;;;;;AClIF;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,eAAe,GAAG,iBAAiB,GAAG,aAAa,GAAG,aAAa,GAAG,aAAa,GAAG,aAAa,GAAG,YAAY,GAAG,YAAY,GAAG,aAAa,GAAG,aAAa,GAAG,YAAY;AAChL;AACA,6BAA6B;AAC7B,YAAY;AACZ,8BAA8B;AAC9B,aAAa;AACb,8BAA8B;AAC9B,aAAa;AACb,6BAA6B;AAC7B,YAAY;AACZ,6BAA6B;AAC7B,YAAY;AACZ;AACA,8BAA8B;AAC9B,aAAa;AACb,8BAA8B;AAC9B,aAAa;AACb,8BAA8B;AAC9B,aAAa;AACb,8BAA8B;AAC9B,aAAa;AACb;AACA,kCAAkC;AAClC,iBAAiB;AACjB;AACA,6BAA6B;AAC7B,eAAe;;;;;;;;;;;AC5BF;AACb;AACA,6CAA6C;AAC7C;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,+BAA+B,mBAAO,CAAC,iCAAU;AACjD,iCAAiC,mBAAO,CAAC,qCAAY;AACrD,+BAA+B,mBAAO,CAAC,iCAAU;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,oBAAoB,sBAAsB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,gBAAgB,IAAI,+BAA+B;AAC1E,oBAAoB,sBAAsB;AAC1C;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;;;;;;;UCpHA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;UEtBA;UACA;UACA;UACA","sources":["webpack://lecture_programs/./src/Canvas.ts","webpack://lecture_programs/./src/Particle.ts","webpack://lecture_programs/./src/Vector.ts","webpack://lecture_programs/./src/helpers.ts","webpack://lecture_programs/./src/index.ts","webpack://lecture_programs/webpack/bootstrap","webpack://lecture_programs/webpack/before-startup","webpack://lecture_programs/webpack/startup","webpack://lecture_programs/webpack/after-startup"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// import Point from \"./Point\";\nvar light = \"#efefef\";\nvar dark = \"#101010\";\nvar Canvas = /** @class */ (function () {\n    function Canvas(theme) {\n        this.POINT_OPTS = {\n            fillStyleDark: \"#efefef\",\n            fillStyleLight: \"#101010\",\n            radius: 5,\n        };\n        this.theme = theme === undefined ? \"dark\" : theme;\n        this.canvas = document.getElementById(\"screen\");\n        this.canvas.width = window.innerWidth;\n        this.canvas.height = window.innerHeight;\n        this.canvas.style.backgroundColor = this.theme === \"dark\" ? dark : light;\n        this.ctx = this.canvas.getContext(\"2d\");\n        // window.addEventListener(\"resize\", function(this:Canvas) {\n        // \tthis.canvas.width = window.innerWidth;\n        // \tthis.canvas.height = window.innerHeight;\n        // }.bind(this));\n    }\n    Canvas.prototype.clear = function () {\n        this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n    };\n    Canvas.prototype.getPointFillStyle = function () {\n        return this.POINT_OPTS[this.theme === \"dark\" ? \"fillStyleDark\" : \"fillStyleLight\"];\n    };\n    Canvas.prototype.drawPoint = function (pt, opts) {\n        if (opts === void 0) { opts = {}; }\n        var fillStyle = opts.fillStyle === undefined ? this.getPointFillStyle() : opts.fillStyle;\n        var radius = opts.radius === undefined ? this.POINT_OPTS.radius : opts.radius;\n        var x = pt.x, y = pt.y;\n        this.ctx.beginPath();\n        this.ctx.arc(x, this.canvas.height - y, radius, 0, 2 * Math.PI, true);\n        this.ctx.fillStyle = fillStyle;\n        this.ctx.fill();\n    };\n    Canvas.prototype.drawPoints = function (pts) {\n        var _this = this;\n        pts.forEach(function (pt) { return _this.drawPoint(pt); });\n    };\n    Canvas.prototype.drawLine = function () {\n    };\n    Canvas.prototype.drawLines = function () {\n    };\n    return Canvas;\n}());\nexports.default = Canvas;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Vector_1 = __importDefault(require(\"./Vector\"));\nvar Particle = /** @class */ (function () {\n    function Particle(mass, p, v, a, damping) {\n        this._damping = 0.995;\n        this._inverseMass = 0;\n        if (mass === 0)\n            throw new Error(\"Partice cannot have mass 0\");\n        if (mass !== undefined)\n            this._inverseMass = 1 / mass;\n        this.position = p === undefined ? new Vector_1.default() : p;\n        this.velocity = v === undefined ? new Vector_1.default() : v;\n        this.acceleration = a === undefined ? new Vector_1.default() : a;\n        if (damping !== undefined)\n            this._damping = damping;\n    }\n    Particle.prototype.copy = function () {\n        return new Particle(1 / this._inverseMass, this.position.copy(), this.velocity.copy(), this.acceleration.copy(), this._damping);\n    };\n    Particle.prototype.setMass = function (m) {\n        if (m === 0)\n            throw new Error(\"Partice cannot have mass 0\");\n        this._inverseMass = 1 / m;\n    };\n    Object.defineProperty(Particle.prototype, \"inverseMass\", {\n        get: function () {\n            return this._inverseMass;\n        },\n        set: function (value) {\n            this._inverseMass = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Particle.prototype, \"damping\", {\n        get: function () {\n            return this._damping;\n        },\n        set: function (value) {\n            this._damping = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Particle.prototype.integrate = function (t, f) {\n        if (t === 0)\n            throw new Error(\"Time difference cannot be 0\");\n        this.position.addScaled(this.velocity, t); // add here a * (t^2 / 2) if necessary\n        if (this.position.y <= 100) {\n            this.position.y = 100;\n            this.velocity.y *= -0.8;\n            this.acceleration.y *= -0.8;\n        }\n        var resAcceleration = Vector_1.default.addScaled(this.acceleration, f, this._inverseMass);\n        this.velocity.addScaled(resAcceleration, t);\n        this.velocity.mul(Math.pow(this._damping, t));\n    };\n    return Particle;\n}());\nexports.default = Particle;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar helpers_1 = require(\"./helpers\");\nvar helpers_2 = require(\"./helpers\");\nvar params = ['x', 'y', 'z'];\nvar Vector = /** @class */ (function () {\n    function Vector(x, y, z) {\n        this.h = 1;\n        this.x = x === undefined ? 0 : x;\n        this.y = y === undefined ? 0 : y;\n        this.z = z === undefined ? 0 : z;\n    }\n    Vector.prototype.copy = function () {\n        return new Vector(this.x, this.y, this.z);\n    };\n    Vector.prototype.log = function () {\n        var _this = this;\n        var Obj = { x: 0, y: 0, z: 0, h: 0 };\n        params.forEach(function (p) {\n            Obj[p] = _this[p];\n        });\n        console.log(Obj);\n    };\n    Vector.prototype.vectorAlg = function (A, algFn) {\n        var _this = this;\n        if (typeof A === \"number\") {\n            params.forEach(function (p) {\n                _this[p] = algFn(_this[p], A);\n            });\n        }\n        else {\n            params.forEach(function (p) {\n                _this[p] = algFn(_this[p], A[p]);\n            });\n        }\n        return this;\n    };\n    Vector.prototype.add = function (A) { return this.vectorAlg(A, helpers_1.addFn); };\n    Vector.prototype.sub = function (A) { return this.vectorAlg(A, helpers_1.subFn); };\n    Vector.prototype.mul = function (A) { return this.vectorAlg(A, helpers_1.mulFn); };\n    Vector.prototype.addScaled = function (A, s) {\n        return this.add(Vector.mul(A, s));\n    };\n    Vector.prototype.div = function (A) {\n        if (A === 0) {\n            throw new Error(\"Division by zero\");\n        }\n        return this.vectorAlg(A, helpers_1.divFn);\n    };\n    Vector.prototype.vectorBool = function (A, boolFn) {\n        var _this = this;\n        var res = true;\n        params.forEach(function (p) { return res && (res = boolFn(_this[p], A[p])); });\n        return res;\n    };\n    Vector.prototype.eq = function (A) { return this.vectorBool(A, helpers_2.eqFn); };\n    Vector.prototype.gt = function (A) { return this.vectorBool(A, helpers_2.gtFn); };\n    Vector.prototype.lt = function (A) { return this.vectorBool(A, helpers_2.ltFn); };\n    Vector.prototype.geq = function (A) { return this.vectorBool(A, helpers_2.geqFn); };\n    Vector.prototype.leq = function (A) { return this.vectorBool(A, helpers_2.leqFn); };\n    Vector.prototype.dot = function (A) {\n        var _this = this;\n        var sum = 0;\n        params.forEach(function (p) {\n            sum += _this[p] * A[p];\n        });\n        return sum;\n    };\n    Vector.prototype.cross = function (A) {\n        return new Vector(this.y * A.z - this.z * A.y, this.z * A.x - this.x * A.z, this.x * A.y - this.y * A.x);\n    };\n    Vector.prototype.magnitude = function () {\n        var _this = this;\n        var sum = 0;\n        params.forEach(function (p) {\n            sum += _this[p] * _this[p];\n        });\n        return Math.sqrt(sum);\n    };\n    Vector.prototype.squareMagniture = function () {\n        var _this = this;\n        var sum = 0;\n        params.forEach(function (p) {\n            sum += _this[p] * _this[p];\n        });\n        return sum;\n    };\n    Vector.prototype.normalize = function () {\n        var m = this.magnitude();\n        return this.div(m);\n    };\n    Vector.prototype.invert = function () {\n        var _this = this;\n        params.forEach(function (p) {\n            _this[p] *= -1;\n        });\n        return this;\n    };\n    Vector.vectorAlg = function (A, B, algFn) {\n        if (typeof B === \"number\") {\n            return new Vector(algFn(A.x, B), algFn(A.y, B), algFn(A.z, B));\n        }\n        else {\n            return new Vector(algFn(A.x, B.x), algFn(A.y, B.y), algFn(A.z, B.z));\n        }\n    };\n    Vector.add = function (A, B) { return Vector.vectorAlg(A, B, helpers_1.addFn); };\n    Vector.sub = function (A, B) { return Vector.vectorAlg(A, B, helpers_1.subFn); };\n    Vector.mul = function (A, B) { return Vector.vectorAlg(A, B, helpers_1.mulFn); };\n    Vector.addScaled = function (A, B, s) {\n        return Vector.add(A, Vector.mul(B, s));\n    };\n    Vector.div = function (A, B) {\n        if (B === 0) {\n            throw new Error(\"Division by zero\");\n        }\n        return Vector.vectorAlg(A, B, helpers_1.divFn);\n    };\n    Vector.vectorBool = function (A, B, boolFn) {\n        var res = true;\n        params.forEach(function (p) { return res && (res = boolFn(A[p], B[p])); });\n        return res;\n    };\n    Vector.eq = function (A, B) { return Vector.vectorBool(A, B, helpers_2.eqFn); };\n    Vector.gt = function (A, B) { return Vector.vectorBool(A, B, helpers_2.gtFn); };\n    Vector.lt = function (A, B) { return Vector.vectorBool(A, B, helpers_2.ltFn); };\n    Vector.geq = function (A, B) { return Vector.vectorBool(A, B, helpers_2.geqFn); };\n    Vector.leq = function (A, B) { return Vector.vectorBool(A, B, helpers_2.leqFn); };\n    return Vector;\n}());\nexports.default = Vector;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.newRand = exports.clockWise = exports.divFn = exports.mulFn = exports.subFn = exports.addFn = exports.ltFn = exports.gtFn = exports.geqFn = exports.leqFn = exports.eqFn = void 0;\n// condition functions\nvar eqFn = function (a, b) { return a === b; };\nexports.eqFn = eqFn;\nvar leqFn = function (a, b) { return a <= b; };\nexports.leqFn = leqFn;\nvar geqFn = function (a, b) { return a >= b; };\nexports.geqFn = geqFn;\nvar gtFn = function (a, b) { return a > b; };\nexports.gtFn = gtFn;\nvar ltFn = function (a, b) { return a < b; };\nexports.ltFn = ltFn;\n// algebraic functions\nvar addFn = function (a, b) { return a + b; };\nexports.addFn = addFn;\nvar subFn = function (a, b) { return a - b; };\nexports.subFn = subFn;\nvar mulFn = function (a, b) { return a * b; };\nexports.mulFn = mulFn;\nvar divFn = function (a, b) { return a / b; };\nexports.divFn = divFn;\n// sort points in clockwise direction\nvar clockWise = function (a, b) { return (Math.atan2(b.y, b.x) - Math.atan2(a.y, a.x)); };\nexports.clockWise = clockWise;\n// rgn\nvar newRand = function (n) { return Math.floor(Math.random() * n); };\nexports.newRand = newRand;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Canvas_1 = __importDefault(require(\"./Canvas\"));\nvar Particle_1 = __importDefault(require(\"./Particle\"));\nvar Vector_1 = __importDefault(require(\"./Vector\"));\nvar t = 1000 / 150;\nvar intervalPtr1 = null;\nvar intervalPtr2 = null;\nvar getX = function (i, n, r, x) {\n    return x + r * Math.cos(2 * Math.PI * i / n);\n};\nvar getY = function (i, n, r, y) {\n    return y + r * Math.sin(2 * Math.PI * i / n);\n};\nvar getRandomColor = function () {\n    var tmp = Math.random();\n    if (tmp < 0.2) {\n        return \"#f00\";\n    }\n    else if (tmp < 0.4) {\n        return \"#0f0\";\n    }\n    else if (tmp < 0.6) {\n        return \"#00f\";\n    }\n    else if (tmp < 0.8) {\n        return \"#f0f\";\n    }\n    else {\n        return \"#ff0\";\n    }\n};\nvar midX = Math.floor(1000);\nvar n = 300;\nvar r = 2;\nvar y = 120;\nvar cnt = 0;\nwindow.onload = function () {\n    setTimeout(function () {\n        console.log(\"Start\");\n        var canvas = new Canvas_1.default();\n        var i = 400;\n        var parts1 = (new Array(n)).fill(0).map(function (p, i) {\n            return new Particle_1.default(10, new Vector_1.default(getX(i, n, r, midX), getY(i, n, r, y)), new Vector_1.default(0, 1000), new Vector_1.default(0, 1100));\n        });\n        var parts2 = (new Array(n)).fill(0).map(function (p) {\n            return new Particle_1.default(10, new Vector_1.default(i, 1000 + i), new Vector_1.default(220 - (i -= 10), 1));\n        });\n        intervalPtr1 = setInterval(function () {\n            game(canvas, parts2);\n            fireWorks(canvas, parts1);\n        }, t);\n    }, 2000);\n};\nvar explode = false;\nvar didExplode = false;\nvar applyEx = function (p, midY) {\n    var phi = Math.atan2(p.position.y - midY, p.position.x - midX);\n    p.velocity.x = 100 * Math.cos(phi) + Math.random() * 100 + Number(Math.random() > 0.6) * 100;\n    p.velocity.y = 100 * Math.sin(phi) + Math.random() * 100 + Number(Math.random() > 0.6) * 100;\n    p.acceleration.x = 0;\n    p.acceleration.y /= 1.3;\n};\nvar G = (new Vector_1.default(0, -1000)).mul(10);\nvar fireWorks = function (canvas, particles) {\n    ++cnt;\n    // canvas.clear();\n    var mid = particles.reduce(function (acc, curr) {\n        return acc + curr.position.y;\n    }, 0) / n;\n    for (var i = 0; i < particles.length; ++i) {\n        if (intervalPtr1 !== null && particles[i].position.y <= 100) {\n            console.log(\"End\", cnt);\n            clearInterval(intervalPtr1);\n        }\n        if (!didExplode && particles[i].position.y >= 1000) {\n            explode = true;\n            didExplode = true;\n        }\n        if (explode) {\n            applyEx(particles[i], mid);\n        }\n        particles[i].integrate(t / 1000, G);\n        canvas.drawPoint({\n            x: particles[i].position.x,\n            y: particles[i].position.y\n        }, {\n            fillStyle: didExplode ? getRandomColor() : undefined,\n            radius: 2\n        });\n    }\n    if (explode) {\n        explode = false;\n    }\n};\nvar game = function (canvas, particles) {\n    canvas.clear();\n    canvas.drawPoint({ x: 500, y: 500 }, { radius: 10, fillStyle: \"#f00\" });\n    for (var i = 0; i < particles.length; ++i) {\n        particles[i].integrate(t / 1000, G);\n        canvas.drawPoint({\n            x: particles[i].position.x,\n            y: particles[i].position.y\n        });\n        // console.log({\n        // \tx: particles[i].velocity.x,\n        // \ty: particles[i].velocity.y\n        // })\n        if (particles[i].position.x >= canvas.canvas.width - 100 && intervalPtr2 !== null) {\n            console.log(\"End\");\n            clearInterval(intervalPtr2);\n        }\n    }\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(\"./src/index.ts\");\n",""],"names":[],"sourceRoot":""}